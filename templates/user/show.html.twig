{% extends 'base.html.twig' %}

{% block title %}Profile{% endblock %}

{% block body %}



    <div class="banner">
        <div>
            <h1 class="banner-title">YOUR PROFIL</h1>
            <p class="banner-text">Text text<span class="underscore-static">_</span></p>
        </div>
    </div>
    


    <section class="content" id="profil-user">

        <div id="content-profil-user">
            <div id="separator-profil"></div>
            <div id="top">
                <h2 class="text-n1">{{ user }}<span>_</span> </h2>
                <div id="avatar">
                    <div>
                        <picture>
                            {% if user.avatar %}
                            <img src="{{ asset('images/avatars/' ~ user.avatar) }}">
                            {% else %}
                                <img src="{{ asset('images/default_profile.jpg') }}">
                            {% endif %}
                        </picture>
                        
                    </div>
                    <div>
                        <i class="fa-regular fa-pen-to-square fa-lg"></i>
                    </div>

                </div>
                <div id="roles">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
            <div id="middle">
                <div id="left">
                    <p class="text-n2" id="infos">Info<span>_</span></p>
                    <div class="text-n3" id="info">
                        <p><span>Username :</span> {{user}}</p>
                        <p><span>Email :</span> {{ user.email }}</p>
                        <p><span>Registration date :</span> {{ user.registrationDate|date("d.m.Y") }}</p>
                        <p><span>Member since :</span> {{ user.durationSinceRegistration}}</p>
                    </div>

                    <div class="logo-profile">
                        <div><i class="fa-regular fa-pen-to-square"></i></div>
                        <div><i class="fa-solid fa-x"></i></div>
                    </div>

                </div>


             
                <div id="right">
                    <p class="text-n2" id="activities"><span>_</span>Activity</p>
                    <div class="text-n3" id="activity">
                        <p><span>Events</span></p>
                        <p><span>Exhibitions</span></p>
                        <p><span>Workshops</span></p>
                        <p><span>Studios</span></p>
                    </div>

                    <div class="logo-profile">

                       


                        <div><i class="fa-regular fa-star"></i></div>

                        

                    


                    </div>

                </div>


            </div>

            <div id="bottom">
                <div id="content">
                    <div id="left">
                        <p>test</p>
                    </div>
                    <div id="right">
                        <p>test</p>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <p>Role: {{ user.getSimpleRoles|join(', ')}} </p>

    <p>SUBSCRIPTION</p>


    {% if  user.subscriptions is empty %}
        <p>pas d'abonnement </p>
        {% else %}
            {% for subscription in user.subscriptions %}
                {% set daysRemaining = subscription.daysRemaining %}
                {% if daysRemaining.remaining > 0 %}
                    <p>Name: {{ subscription.subscriptionType.name }}</p>
                    <p>Payment date: {{ subscription.paymentDate|formatDate }}</p>
                    <p>Duration: {{ subscription.subscriptionType.duration }} days</p>
                    <p>End date: {{ daysRemaining.endDate }}</p>
                    <p>Remaining days: {{ daysRemaining.remaining }}</p>
                {% endif %}
            {% endfor %}

    {% endif %}



    {# show only the current subscription #}
    {% for subscription in user.subscriptions %}
        {% set daysRemaining = subscription.daysRemaining %}
        {% if daysRemaining.remaining > 0 %}
            <p>Name: {{ subscription.subscriptionType.name }}</p>
            <p>Payment date: {{ subscription.paymentDate|formatDate }}</p>
            <p>Duration: {{ subscription.subscriptionType.duration }} days</p>
            <p>End date: {{ daysRemaining.endDate }}</p>
            <p>Remaining days: {{ daysRemaining.remaining }}</p>
        {% endif %}
    {% endfor %}


    
    <p><a href="{{ path('edit_user', {'id': app.user.id }) }}">EDIT info</a></p>

    
    
    <div id="avatar">
        <div id="avatar-profil">
            
        </div>
        
        <div id="form">
            {{ form_start(form) }}
            {{ form_row(form.avatar) }} 
            {{ form_end(form) }}
        </div>
    </div>



    <div>
        <a href=" {{ path('app_logout') }}">logout</a> - 

        {# <a href=" {{ path('delete_user', {'id': app.user.id }) }}">delete account</a> -  #}

        <a href=" {{ path('editPassword_user',{'id': app.user.id }) }}">change password</a>


    </div>




{% endblock %}
