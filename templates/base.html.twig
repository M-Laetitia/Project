<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>

        <meta name="description" content="{% block meta %}Description!{% endblock %}">

        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">

        {% block stylesheets %}
        <link rel="stylesheet" href="{{asset('css/general.css')}}">
        {% endblock %}

        {% block javascripts %}
        {% endblock %}
    </head>
    <body>

        <nav>
            <a href="{{ path('app_home') }}">HOME</a>

            <a href="{{ path('app_artist') }}">ARTISTS</a>

            <a href="{{ path('app_event') }}">EVENTS</a>


            {% if app.user %}
                <a href="{{ path('show_user', {'id': app.user.id }) }}">profil</a>
            {% else %}
                <a href=" {{ path('app_register') }}">register</a>
                <a href="{{ path('app_login') }}">login</a>
            {% endif %}


            {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('app_dashboard')}}">dashboard(admin)</a>
            {% endif %}

            
            {% if is_granted('ROLE_ARTIST') %}
                {# If the user has the "ROLE_ARTIST" role, redirect to artist page management #}
                <a href="{{ path('manage_artist', {'id': app.user.id }) }}">Manage artist page (artist)</a>
            {% elseif is_granted('IS_AUTHENTICATED_FULLY') %}
                {# If a user is logged in but does not have the "ROLE_ARTIST" role, redirect to create a new artist #}
                <a href="{{ path('new_artist', {'id': app.user.id }) }}">Join us (for artists)</a>
            {% else %}
                {# else, add something eventually or not #}
            {% endif %}

      

            {# <a href="{{ path('new_artist', {'id': app.user.id }) }}">Join us (for artists)</a> #}
        </nav>

            {% for message in app.flashes('success') %}
            <div class="alert alert-success">
                {{ message }}
            </div>
            {% endfor %} 
        
        <div class="content">
            {% block body %}
            {% endblock %}
        </div>

        <footer>
            <a href="#">Terms of Use</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Contact</a>
        </footer>
    </body>


    {# Jquery #}
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="{{ asset('js/main.js') }}"></script>

</html>
