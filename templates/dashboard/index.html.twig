{% extends 'base.html.twig' %}

{% block title %}Admin Dashboard - MOSAIC{% endblock %}
{% block meta %}Manage events with ease on the admin dashboard of [Nom de votre site]. Access an overview of all organized events, view details, and efficiently edit or remove them as needed.{% endblock %}

{% block body %}

<div class="banner">
    <div class="content">
        <h1 class="banner-title">Dashboard</h1>
        <div class="subtitle">
            <p class="banner-text">Subtitle</p>
            <div class="underscore-blink"> </div>
        </div>
    </div>
</div>


<section class="content" id="dashboard-main">

    <div id="categories">
        <p><a href="{{ path('list_users') }}"> <i class="fa-solid fa-user"></i> See all users</a></p>
        {# <div>
            <p><a href="#event">EVENTS</a> | <a href="#expo">EXPOSITIONS</a> |<a href="#workshop">WORKSHOP </a> | <a href="#studio">STUDIO</a></p>
        </div> #}
    </div>

    <div id="container-all">

        {# EVENTS #}
        <div id="events">
            <div>
                <h2 class="text-n2" id="event">Events<span>_</span></h2>
                <p><a class="btn btn6" href="{{ path('new_event') }}"><i class="fa-solid fa-plus"></i> New Event</a></p>
            </div>
            <p class="text-n3">Current and future Events  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

                <div class="ongoing">
                    {% for event in ongoingEvents %}
                    <div class="element">
                        <p>
                            <a href="{{ path('show_event_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                            <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                                (event.status == 'CLOSED' ? 'closed' : 
                                                (event.status == 'PENDING' ? 'pending' : 
                                                (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                                {{ event.status }}
                            </span>
                        
                        </p>

                        <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}}</p>
                 
                        
                        <p>Capacity: {{event.nbReversationMade}}  /  {{event.nbRooms}} - Remaining: {{event.nbReversationRemaining}}</p>

                        <div class="actions"> 
                            <a href="{{ path('show_event_admin', {slug : event.slug }) }}"><i class="ri-eye-close-fill"></i></a>
                            <a href="{{ path('edit_event', {'id': event.id}) }}"><i class="ri-file-edit-fill"></i></a> 
                            <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                        </div>

                        
                        

                        <div class="delete-container" id="{{event.id}}" style="display:none">
                            <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                            <div>
                                <p><a href="{{ path('delete_event', {'id': event.id}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                                <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                            </div>
                        </div>

                    </div>
                    <div class="separator"></div>
                    {% endfor %}
                </div>

                <p class="text-n3">Past Events  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

                <div class="past-ones">
                    {% for event in pastEvents %}
                    <div class="element">
                        <p>
                            <a href="{{ path('show_event_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                            <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                                (event.status == 'CLOSED' ? 'closed' : 
                                                (event.status == 'PENDING' ? 'pending' : 
                                                (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                                {{ event.status }}
                            </span>
                        
                        </p>

                        <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}}</p>
                 
                        
                        <p>Capacity: {{event.nbReversationMade}}  /  {{event.nbRooms}}</p>

                        <div class="actions"> 
                            <a href="{{ path('show_event_admin', {slug : event.slug }) }}"><i class="ri-eye-close-fill"></i></a>
                            <a href="{{ path('edit_event', {'id': event.id}) }}"><i class="ri-file-edit-fill"></i></a> 
                            <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                        </div>

                    

                        <div class="delete-container" id="{{event.id}}" style="display:none">
                            <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                            <div>
                                <p><a href="{{ path('delete_event', {'id': event.id}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                                <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                            </div>
                        </div>

                    </div>
                    <div class="separator"></div>
                    {% endfor %}
                </div>

            <div>
        </div>

        {# EXPO #}
        <div id="expos">
            <div>
                <h2 class="text-n2" id="event">Expositions<span>_</span></h2>
                <p><a class="btn btn6" href="{{ path('new_expo') }}"><i class="fa-solid fa-plus"></i> New Exposition</a></p>
            </div>
            <p class="text-n3">Current and future Expositions  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

                <div class="ongoing">
                    {% for event in ongoingExpos %}
                    <div class="element">
                        <p>
                            <a href="{{ path('show_event_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                            <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                                (event.status == 'CLOSED' ? 'closed' : 
                                                (event.status == 'PENDING' ? 'pending' : 
                                                (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                                {{ event.status }}
                            </span>
                        
                        </p>

                        <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}} / {{event.endDate|formatDate}} - {{event.endDate|date('H:i')}}</p>
                 
                        
                        <p>Capacity: {{event.nbReversationMade}}  /  {{event.nbRooms}} - Remaining: {{event.nbReversationRemaining}}</p>

                        <div class="actions"> 
                            <a href="{{ path('show_expo_admin', {'id': event.id}) }}"><i class="ri-eye-close-fill"></i></a>
                            <a href="{{ path('edit_expo', {'id': event.id}) }}"><i class="ri-file-edit-fill"></i></a> 
                            <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                        </div>

                    
                        <div class="delete-container" id="{{event.id}}" style="display:none">
                            <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                            <div>
                                <p><a href="{{ path('delete_expo', {'id': event.id}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                                <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                            </div>
                        </div>

                    </div>
                    <div class="separator"></div>
                    {% endfor %}
                </div>

            <p class="text-n3">Past Expositions  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

            <div class="past-ones">
                {% for event in pastExpos %}
                <div class="element">
                    <p>
                        <a href="{{ path('show_event_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                        <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                            (event.status == 'CLOSED' ? 'closed' : 
                                            (event.status == 'PENDING' ? 'pending' : 
                                            (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                            {{ event.status }}
                        </span>
                    
                    </p>

                    <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}} / {{event.endDate|formatDate}} - {{event.endDate|date('H:i')}}</p>
             
                    
                    <p>Capacity: {{event.nbReversationMade}}  /  {{event.nbRooms}} </p>

                    <div class="actions"> 
                        <a href="{{ path('show_expo_admin', {'id': event.id}) }}"><i class="ri-eye-close-fill"></i></a>
                        <a href="{{ path('edit_expo', {'id': event.id}) }}"><i class="ri-file-edit-fill"></i></a> 
                        <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                    </div>

                
                    <div class="delete-container" id="{{event.id}}" style="display:none">
                        <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                        <div>
                            <p><a href="{{ path('delete_expo', {'id': event.id}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                            <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                        </div>
                    </div>

                </div>
                <div class="separator"></div>
                {% endfor %}
            </div>

        </div>


        {# WORKSHOP#}
        <div id="worshop">
            <div>
                <h2 class="text-n2" id="event">Workshops<span>_</span></h2>
                <p><a class="btn btn6" href="{{ path('new_workshop') }}"><i class="fa-solid fa-plus"></i> New Workshop</a></p>
            </div>
            <p class="text-n3">Current and future Workshops  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

                <div class="ongoing">
                    {% for event in ongoingWorkshop %}
                    <div class="element">
                        <p>
                            <a href="{{ path('show_workshop_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                            <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                                (event.status == 'CLOSED' ? 'closed' : 
                                                (event.status == 'PENDING' ? 'pending' : 
                                                (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                                {{ event.status }}
                            </span>
                        
                        </p>

                        <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}} / {{event.endDate|formatDate}} - {{event.endDate|date('H:i')}}</p>
                 
                        
                        <p>Capacity: {{event.nbRegistrationMade}}  /  {{event.nbRooms}} - Remaining: {{event.nbRegistrationRemaining}}</p>

                        <div class="actions"> 
                            <a href="{{ path('show_workshop_admin', {'slug': event.slug}) }}"><i class="ri-eye-close-fill"></i></a>
                            <a href="{{ path('edit_workshop', {'slug': event.slug}) }}"><i class="ri-file-edit-fill"></i></a> 
                            <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                        </div>

                    
                        <div class="delete-container" id="{{event.id}}" style="display:none">
                            <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                            <div>
                                <p><a href="{{ path('delete_workshop', {'slug': event.slug}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                                <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                            </div>
                        </div>

                    </div>
                    <div class="separator"></div>
                    {% endfor %}
                </div>

            <p class="text-n3">Past Workshops  <span> <i class="fa-solid fa-circle-chevron-down"></i></span></p>

            <div class="past-ones">
                {% for event in pastWorkshop %}
                <div class="element">
                    <p>
                        <a href="{{ path('show_workshop_admin', {slug : event.slug  }) }}"><span class="name">✦ {{event.name}}</span></a>
                        <span class="status {{ event.status == 'OPEN' ? 'open' : 
                                            (event.status == 'CLOSED' ? 'closed' : 
                                            (event.status == 'PENDING' ? 'pending' : 
                                            (event.status == 'ARCHIVED' ? 'archived' : 'status-default'))) }}">
                            {{ event.status }}
                        </span>
                    
                    </p>

                    <p>{{event.startDate|formatDate}} - {{event.startDate|date('H:i')}} / {{event.endDate|formatDate}} - {{event.endDate|date('H:i')}}</p>
             
                    
                    <p>Capacity: {{event.nbRegistrationMade}}  /  {{event.nbRooms}} </p>

                    <div class="actions"> 
                        <a href="{{ path('show_workshop_admin', {'slug': event.slug}) }}"><i class="ri-eye-close-fill"></i></a>
                        <a href="{{ path('edit_workshop', {'slug': event.slug}) }}"><i class="ri-file-edit-fill"></i></a> 
                        <a href=""><i class="ri-close-circle-fill delete-btn" data-target="{{ event.id}}"></i></a>
                    </div>

                
                    <div class="delete-container" id="{{event.id}}" style="display:none">
                        <p>Are you sure you want to delete this entry? This cannot be undone.</p>
                        <div>
                            <p><a href="{{ path('delete_workshop', {'slug': event.slug}) }}"><i class="ri-check-line"></i> Confirm</a></p>
                            <p class="close-confirmation-btn"><i class="ri-close-fill "></i> Cancel</p>
                        </div>
                    </div>

                </div>
                <div class="separator"></div>
                {% endfor %}
            </div>
        </div>

         {# STUDIOS #}
         <div id="studios">
            <div>
                <h2 class="text-n2" id="event">Studios<span>_</span></h2>
                {# <p><a class="btn btn6" href="{{ path('new_event') }}"><i class="fa-solid fa-plus"></i> New Event</a></p> #}
            </div>
            <p class="text-n3"><i class="fa-solid fa-circle-chevron-down"></i></span></p>
                            
            <div class="ongoing">
                {% for studio in studios %}
                <div class="element">
                    <p>
                        <a href="{{ path('show_studio_admin', {slug : studio.slug}) }}"><span class="name">✦{{studio.name}}</span></a>
                    </p>
                    <p>Capacity: {{studio.nbRooms}} </p>
                </div>
                <hr>
                {% endfor %}
            </div>

        </div>

    </div>
    
</section>

    <script>
        $(document).ready(function() {
            $('.fa-circle-chevron-down').click(function() {
                $(this).closest('p').next('.ongoing').slideToggle();
            });

            $('.fa-circle-chevron-down').click(function() {
                $(this).closest('p').next('.past-ones').slideToggle();
            });
        });
    </script>
    

{% endblock %}
